% -*- mode: latex; eval: (flyspell-mode 1); ispell-local-dictionary: "american"; TeX-master: t; -*-

\documentclass[12pt]{article}

\usepackage{hyperref,amsthm,amsmath,amsfonts,enumerate,stmaryrd}

%\newcommand{\bZ}{\mathbb{Z}}
\newcommand{\bN}{\mathbb{N}} %{\bZ_{\ge 0}}
\newcommand{\bNast}{\bN^*}
\newcommand{\binover}{\mathbin{/}}



% \newcommand{\seg}[2]{\left\llbracket#1, #2 \right\rrbracket}
% \newcommand{\floor}[1]{\left\lfloor #1  \right\rfloor}
% \newcommand{\ceil}[1]{\left\lceil #1  \right\rceil}
\newcommand{\abs}[1]{\left| #1 \right|}

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{proposition}{Proposition}


 \theoremstyle{definition}
 \newtheorem{definition}{Definition}
 %\newtheorem{exercise}{Exercise}
 %\newtheorem{example}{Example}




 \begin{document}

 \title{Powers of $2$ versus powers of $3$: some thoughts about the battle}
 \author{Charlot Colmes}
 \maketitle 


 The aim of this paper is to prove the following two theorems, which deal with powers of $2$ and $3$:

   \begin{theorem} \label{thm:2m-moins-3n}
     For all $m$, $n \in \bN$,
     $- 10 \le 2^m - 3^n  \le 4$ is equivalent to
     $$(2^m, 3^n) \in \{ (8, 9), (4, 3), (2, 3), (2, 1)  \} \, .
     $$
   \end{theorem}

   
   \begin{theorem} \label{thm:IndMO}
     For all $x$, $m$, $n \in \bN$,
     $x^2 = 2^m + 3^n$ is equivalent to
     $$
     (x, 2^m, 3^n) \in \{  (5, 16, 9), (3, 8, 1), (2, 1, 3) \} \, .
     $$
   \end{theorem}

   Theorem~\ref{thm:IndMO} solves Question~$8$ of the $7$th Indian Mathematical Olympiad (1992).
   Theorem~\ref{thm:2m-moins-3n} is proven by means of a ``magic'' modulus;
   we show that such a method does not apply to Theorem~\ref{thm:IndMO}. 
   Before proceeding,

   Let $b \in \bN$ and let $m \in \bNast$.
   The sequence $\left( b^n \bmod m \right)_{n \in \bN}$ is eventually periodic.
   It is purely periodic if, and only if, $b$ is coprime to~$m$.
   
   \begin{proof}[Proof of Theorem~\ref{thm:2m-moins-3n}]
     The idea is to work modulo $80$.
     Put  
     $$
     Q  = \{ 16, 32, 48, 64 \}  - \{ 1, 3, 9, 27 \}  - [- 10, 4] = [-15, - 1] \cup [1, 73] \,.
     $$
     %\end{align*}      
     For each $n \in \bN$,
     $3^{n + 4}$ is congruent to $3^n$ modulo $80$ because 
     $$3^{n + 4} - 3^n =  (3^4 - 1) 3^n = 80 \cdot  3^n \, .
     $$
     Therefore,
     a simple induction on $n$ shows that for each $n \in \bN$,
     at least one element of $\{ 1, 3, 9, 27 \}$ is congruent to $3^n$ modulo $80$.
     For each $m \in \bN$,
     $2^m \bmod 5$
     is both congruent to $2^m$ modulo $5$ and an element of $[1, 4]$.
     It follows that for each $m \in \bN$,
     at least one element of
     $\{ 16, 32, 48, 64 \} = 16 [1, 4]$ is congruent to $2^{m + 4}  = 16  \cdot 2^m$ modulo $80 = 16 \cdot 5$.
     Hence, for every $m$, $n \in \bN$ and every $r \in [-10, 4]$, 
     at least one element of $Q$ is congruent to $2^{m + 4} - 3^n - r$ modulo $80$.
     Besides, $Q$ does not contain any multiple of $80$.
     Therefore,
     $2^{m + 4}  - 3^n$ is incongruent to $r$ modulo $80$
     for every $m$, $n \in \bN$ and every $r \in [- 10, 4]$.
     Now, let $m$, $n \in \bN$ be such that $2^m - 3^n \in [-10, 4]$.
     The previous discussion ensures $m < 4$,
     whence  
     $$
     3^n \in 2^m - [- 10, 4] \subseteq \{ 1, 2, 4, 8 \} - [- 10, 4] = [ -3, 18] \, ,
     $$
     and consequently, $n \le 2$.
     It follows that $(m, n)$ lies in the small finite set $[0, 3] \times [0, 2]$,
     and thus the desired result is easily checked by inspection.
   \end{proof}

   Since $2^4 - 3^3 = - 11$ and $2^5 - 3^3 = 5$,
   Theorem~\ref{thm:2m-moins-3n} is optimal.
   Its proof relies on the magic modulus $80$ which is also optimal; let us explain why.
   Put $\alpha = 480720240$ (modular exponentiation is cheap~!);
   let $q \in [2, 79]$.
   If there exists $(m, n) \in \bN \times \bN$ such that
   $q$ divides $3^n - 2^m - 1$, $2^{m + \alpha} - 2^m$, and $3^{n + \alpha} - 3^n$
   then
   $3^{n + k \alpha} - 2^{m + k \alpha}$ is congruent to $1$ modulo $q$ for every $k \in \bN$,
   which makes $q$ non-magic. 
   We claim that such an ordered pair $(m, n)$ exists: 
   if $q \notin \{ 16, 27, 32, 48, 54, 64 \}$ then set $(m, n) = (3, 2)$,
   if $q \in \{ 16, 32, 64 \}$ then set $(m, n) = (6, 0)$, 
   if $q \in \{ 27, 54 \}$ then set $(m, n) = (9, 3)$, and 
   if $q = 48$ then set $(m, n) = (5, 4)$.
   The verification is left to the reader.

   % \begin{proposition}
   %   Let $b$, $m \in \bZ$ and let $X \subseteq \bZ$ be such that $bX \subseteq X + m \bZ$.
   %   For every $n \in \bN$ and every $x \in X$, at least one element of $X$ is congruent to $b^n x$ modulo~$m$.
   % \end{proposition}
   
   Let us now turn to the proof of Theorem~\ref{thm:IndMO}.
   It requires the following two lemmas:

     \begin{lemma} \label{lem:x2=q+1}
       For every $x \in \bN$, $x^2 - 1$ is a prime power if, and only if, $x \in \{ 2, 3 \}$. 
     \end{lemma}

     \begin{proof}
       The ``if'' part is easily checked: $2^2 - 1 = 3^1$ and $3^2 - 1 = 2^3$. 
       It remains to prove the ``only if'' part.
       Let $x$, $p \in \bN$ be such that $p$ is prime and $x^2 - 1$ is a power of~$p$.
       Since  $x^2 - 1 = (x - 1)(x + 1)$, 
       both $x - 1$ and $x + 1$ can be written as powers of~$p$.
       Besides, $x - 1$ is less than $x + 1$.
       Therefore, $x - 1$ divides $x + 1$.
       It follows that $x - 1$ divides $(x + 1) - (x - 1) = 2$,
       whence $x \in \{ 2, 3 \}$.
    \end{proof} 
    

   
   \begin{lemma} \label{lem:2m+3n-square-mod-12}
     For every $m$, $n \in \bNast$ such that $2^m + 3^n$ is a square modulo $12$,
     both $m$ and $n$ are even.
   \end{lemma}

   \begin{proof}
     Let $m$, $n \in \bNast$ be such that $2^m + 3^n$ is a square modulo $12$.
     In particular, $2^m + 3^n$ is both a square modulo $3$ and a square modulo~$4$.
     Since $2^m + 3^n$ is congruent to ${(- 1)}^m$ modulo $3$ and since $- 1$ is not a square modulo $3$,
     $m$ is even.
     In particular, $m$ is not less than $2$, and thus $2^m + 3^n$ is congruent to ${(- 1)}^n$ modulo~$4$.
     Besides, $- 1$ is not a square modulo~$4$.
     Therefore, $n$ is even.
   \end{proof}

   Let $x$, $p$, $q \in \bN$ be such that $p$ and $q$ are coprime.
   We claim that 
   $x$ is a square modulo $p q$
   if, and only if, $x$ is a both a square modulo $p$ and a square modulo~$q$.
   The ``only if'' part is trivial and
   implicitly used in the proof of Lemma~\ref{lem:2m+3n-square-mod-12} with $p = 3$ and $q = 4$.
   The ``if'' part follows from the Chinese remainder theorem and
 in the proof of Theorem~\ref{thm:pow-2-square-mod} below.

   
   \begin{proof}[Proof of Theorem~\ref{thm:IndMO}]
     Assume $x^2 = 2^m + 3^n$.
     In the case where $m = 0$,
     we have $x^2 - 1 = 3^n$,
     and thus Lemma~\ref{lem:x2=q+1} ensures $x = 2$ and $n = 1$;
     in the case where $n = 0$,
     we have $x^2 - 1 = 2^m$,
     and thus Lemma~\ref{lem:x2=q+1} ensures $x = m = 3$.
     Let us now assume $mn \ne 0$.
     Then, Lemma~\ref{lem:2m+3n-square-mod-12} ensures that both $m$ and $n$ are even.
     In particular, both $\mu = m \binover 2$ and $\nu = n \binover 2$ are positive integers.
     Since 
     $$
     3^n = x^2 - 2^m = x^2 - 2^{2\mu} = (x - 2^\mu)(x + 2^\mu) \,, 
     $$
     there exists $k \in [0, n]$ such that $3^k = x - 2^\mu$ and $3^{n - k} = x + 2^\mu$.
     Besides, inequality $x - 2^\mu < x + 2^\mu$ is clear. 
     It follows $k < n - k$, or equivalently, $3^{n - 2 k} - 1 \in \bNast$.
     Subsequently, straightforward computations yield
     $$
     2^{\mu + 1} = (x + 2^\mu) - (x - 2^\mu) = 3^{n - k} - 3^k = 3^k \left( 3^{n - 2k} - 1 \right) \,,
     $$
     whence $k = 0$ and $2^{\mu + 1} = 3^n - 1$.
     Lemma~\ref{lem:x2=q+1} ensures $3^\nu \in \{ 2, 3 \}$.
     It follows $\nu = 1$, $n = 2$, $\mu = 2$, $m = 4$, and $x = 5$.
     The desired result is now easily checked by inspection. 
  \end{proof}

  Let us now show that 
  the magic moduli method cannot directly yield a proof for Theorem~\ref{thm:IndMO}.
  For each $Q \subseteq \bNast$,
  let $E_Q$ denote the set of those $(m, n) \in \bN \times \bN$ such that for every $q \in Q$,
  $2^m + 3^n$ is a square modulo~$q$.
  If we could finite a finite $Q \subseteq \bNast$ such that $E_G$ is finite
  then the proof of Theorem~\ref{thm:IndMO} would reduce to an inspection of $E_Q$.
  The following theorem rules out the existence of such a $Q$:
  % they ensure that for every finite $Q \subseteq \bNast$,
  % both $E_Q \cap ( \{ 0 \} \times \bN )$ and $E_Q \cap ( \bN \times \{ 0 \})$ are infinite.

  Let $\phi$ denote Euler's totient function.

  \begin{lemma}
    Let $n$, $q \in \bNast$ be such that $q$ is a prime power that divides~$n$.
   For every $x \in \bN$, $x^{\phi(n)}$ is congruent to either $0$ or $1$ modulo~$q$.
    %$x^{\phi(n)}$ and $x^{k \phi(n)}$ are congruent modulo~$n$. 
  \end{lemma}

  \begin{proof}
    Let $p$, $r \in \bNast$ be such that
    $p$ is prime and $q = p^r$.
    Without loss of generality, we may assume that $p^{r + 1}$ does not divide~$n$.
    First, assume that $p$ does not divide~$x$.
    Then $x$ and $q$ are coprime,
    and thus Euler's theorem ensures that $x^{\phi(q)}$ is congruent to $1$ modulo $q$.
    Besides, $\phi(q)$ divides $\phi(n)$ because $\phi$ is multiplicative.
    It follows that $x^{\phi(n)}$ is congruent to $1$ modulo~$q$.
    Second, assume that $p$ divides~$x$.
    Then, $q$ divides $x^r$.
    Besides, $x^r$ divides $x^{\phi(n)}$ because
    $$
    \phi(n) \ge \phi(q) = p^{r - 1} (p - 1) \ge 2^{r - 1} \ge r \,.
    $$
    It follows that $x^{\phi(n)}$ is congruent to $0$ modulo~$q$.
\end{proof} 
  
  \begin{proof}
    First, assume that $p$ does not divide~$x$.
    Then $x$ and $p^r$ are coprime,
    and thus Euler's theorem ensures that $x^{\phi(p^r)}$ is congruent to $1$ modulo $p^r$.
    Besides,  $\phi(p^r)$ divides $\phi(n)$ because $\phi$ is multiplicative.
    It follows that both $x^{\phi(n)}$ and $x^{2\phi(n)}$ are congruent to $1$ modulo $p^r$.
    Second, assume that $p$ divides~$x$.
    Then, both  $x^{\phi(n)}$ and $x^{2\phi(n)}$ are congruent to $0$ modulo $p^r$
    because
    $$
    \phi(n) \ge \phi(p^r) = p^{r - 1} (p - 1) \ge 2^{r - 1} \ge r \, .
    $$  
    Either way, $x^{\phi(n)}$ and $x^{2\phi(n)}$ are congruent modulo $p^r$.
    Therefore, $x^{\phi(n)}$ and $x^{2\phi(n)}$ are congruent modulo any prime power that divides $n$,
    or equivalently, $x^{\phi(n)}$ and $x^{2\phi(n)}$ are congruent modulo~$n$.
    The desired result follows from a simple induction on~$k$.
  \end{proof}
  
  $n = 2^u p = 3^v q$
  
  $$
  2^{\phi(n)} = 2^{u \phi(n)} 
  $$

  $$
  2^{\phi(n)}
  $$
  \begin{theorem}
    For every $(x, y) \in \{ (16, 9), (8, 1), (1, 3) \}$ and every $n \in \bNast$, 
    $x^{1 + \phi(n)} + y^{1 + \phi(n)}$ is a square modulo~$n$. 
  \end{theorem}

  \begin{proof}

      
    Let $\alpha$ be such that 
    Without loss of generality, we may assume $u \ge 4$.
    Let $u$, $v$, $q' \in \bN$ be such that $q = 2^u 3^v q'$ and $6$ does not divide $q'$.
    Since $2$ is invertible modulo $3^v q'$,
    there exists $\phi \in \bNast$ such that $2^\phi$ is congruent to $1$ modulo $3^v q'$
    (no knowledge about Euler's totient function is required here).
    Since $3$ is invertible modulo $2^u q'$,
    there exists $\psi \in \bNast$ such that $2^\psi$ is congruent to $1$ modulo $2^u q'$.
    Set $\alpha = (u + v + 1)\phi \psi$.
    %Note that $\alpha > 0$.
    % both $\phi$ and $\psi$ divide $\alpha$
    % and 
    % $1 + \alpha$ is larger than $u$, and
    % $1 + \alpha$ is larger than~$v$.
    Since $\alpha > u$,
    $2^\alpha$ is congruent to $0$ modulo $2^u$.
    Since $\phi$ divides $\alpha$, 
    $2^\alpha$ is congruent to $1$ modulo $3^v q'$.
    Since $\alpha > v$,
    $3^\alpha$ is congruent to $0$ modulo $3^v$.
    Since $\phi$ divides $\alpha$,
    $3^\alpha$ is congruent to $1$ modulo $2^u q'$. 
       
    
     $$
     \begin{array}{|r|ccccc|}
       \hline 
       & 2^\alpha & 3^\alpha & 1 + 3^{1 + k \alpha} & 16^{1 + k \alpha} + 9^{1 + k \alpha} & 8^{1 + k \alpha} + 1 \\
    \hline                                                                                     
       2^u &  0 &  1 & 4 & 9 &  1 \\
       3^v &  1 &  0 & 1 & 16 & 9 \\
       q'  &  1 &  1 & 4 & 25 & 9 \\
        \hline 
     \end{array} 
     $$
        
    
    %  $$
    %  \begin{array}{|r|ccccc|}
    %    \hline 
    %    2^\alpha & \\
    %    3^\alpha & \\
    %    1 + 3^{1 + k \alpha} & \\
    %    2^{4(1 + k \alpha)} + 3^{2(1 + k \alpha)} & \\
    %    2^{3(1 + k \alpha)} + 1 \\
    % \hline                                                                                     
    %    % 2^u &  0 &  1 & 4 & 9 &  1 \\
    %    % 3^v &  1 &  0 & 1 & 16 & 9 \\
    %    % q'  &  1 &  1 & 4 & 25 & 9 \\
    %    %  \hline 
    %  \end{array} 
    %  $$
    
    Let us apply the Chinese remainder theorem three times:
    there exist $x_{4, 2}$, $x_{0, 1}$, $x_{3, 0} \in \bNast$ such that
    $x_{4, 2}$ is congruent to $3$ modulo $2^u$,
    $x_{4, 2}$ is congruent to $4$ modulo $3^v$, 
    $x_{4, 2}$ is congruent to $5$ modulo $q'$,
    $x_{0, 1}$ is congruent to $1$ modulo $3^v$,
    $x_{0, 1}$ is congruent to $2$ modulo $2^u q'$,
    $x_{3, 0}$ is congruent to $1$ modulo $2^u$,
    $x_{3, 0}$ is congruent to $3$ modulo $3^v q'$.
    
    
    % $$
    % 2^{(1 + \alpha k) m} 
    % $$
    % $0$ modulo
    % $2^m$ modulo 
    % $$
    % 3^{(1 + \alpha) n} 
    % $$
    Put
    $$
    y = 2^{(1 + k \alpha)m} + 3^{(1 + k \alpha)n}
    $$
    for each $k \in \bN$.
    % Since $(1 + k \alpha) m$ is not less than $u$ and 
    % since $\psi$ divides $\alpha$,
    % $y_k$ is congruent to $9$ modulo $2^u$.
    % Since $\phi$ divides $\alpha$ and
    % since $(1 + k \alpha) n$ is not less than $v$,
    % $y_k$ is congruent to $16$ modulo $3^v$.
    % Since both $\phi$ and $\psi$ divide $\alpha$,
    % $y_k$ is congruent to $25$ modulo $q'$.
    Second, let us examine the case where $m = 0$ and $n = 1$.
    $x$ is congruent to $1$ modulo $3^v$ and 
    $x$ is congruent to $2$ modulo $2^u q'$.
    Since $(1 + k \alpha) n$ is larger than $v$,
    $y_k$ is congruent to $1$ modulo $3^v$.
    Since $\psi$ divides $\alpha$,
    $y_k$ is congruent to $4$ modulo $2^u q'$.
   \end{proof} 

% (4, 2), (0, 1), (3, 0)
   \begin{theorem} \label{thm:pow-2-square-mod}
     For each $q \in \bNast$,
     there exist $\alpha$, $x \in \bNast$ such that for every $k \in \bNast$, 
     $2^{3 + k \alpha} + 1$ is congruent to $x^2$ modulo~$q$.
   \end{theorem}

   \begin{proof}
     Let $p$, $\nu \in \bN$ be such that $q = 2^\nu p$ and $p$ is odd.
     The Chinese remainder theorem ensures that there exists $x \in \bNast$ such that
     $x$ is congruent to $1$ modulo $2^\nu$ and to $3$ modulo~$p$.
     Since $2$ is multiplicatively invertible modulo $p$,
     there exists $\phi \in \bNast$ such that $2^\phi$ is congruent to $1$ modulo $p$
     (no knowledge about Euler's totient function is required here).
     Put $\alpha = (\nu + 1) \phi$:
     $\alpha$ is positive,
     $\phi$ divides $\alpha$, and
     $3 + \alpha$ is larger than~$v$.
     For each $k \in \bNast$,
     $2^{k \alpha + 3} + 1$ is congruent
     to $1$ modulo $2^v$ and
     to $9$ modulo $p$,
     whence $2^{3 + k \alpha} + 1$ is congruent to $x^2$ modulo~$q$.
   \end{proof}
     
   \begin{theorem}
     For each $m \in \bNast$,
     there exist $\alpha$, $x \in \bNast$ such that for every $k \in \bNast$, 
     $3^{1 + k \alpha} + 1$ is congruent to $x^2$ modulo~$m$.
   \end{theorem}

   \begin{proof}
     The proof is similar to that of Theorem~\ref{thm:pow-2-square-mod} and left to the reader.
    \end{proof} 



\end{document} 


\end{document}  
\bibliographystyle{plain}
\bibliography{IndMO92}
